{% extends "base.html"%}
{% block content %}
<hr/>
<link rel="stylesheet" type="text/css" href="../../static/css/question.css">
<script src="https://use.fontawesome.com/5e5d2ddae6.js"></script>
  <div id = "ques_head" class="row">
    <div class = "col-md-9 ">
    <div id = "upvote_downvote" class = "col-md-1 col-md-offset-1">
        <input type = "image" id = "upvote" class = "qvote-up" src="../../static/img/upvote.png">
        <br>
        <span class="vote-count" type = "button" name="vote-count" id="vote-count">{{ question['votes'] }}</span>
        <br>
        <input type = "image" id= "downvote" class = "qvote-down" src="../../static/img/downvote.png">
        <br>
        <button id = "bookmark_ques" type="button" >Bookmark</button>
        <button id = "flag_ques" type="button" >Flag</button>
    </div> 
    <div class = "col-md-6">
       <div class = "media-object">
      <div class = "media-object-section">
          <div id = "avatar" class="thumbnail pull-left">
                <img  id = "avatar_ques" src="http://placehold.it/80x80&text=[img]" />
          </div>
      </div>
      <div class = "media-object-section">
        <h5 id = "short_desc">{{ question['short_description'] }}</h5>
        <br>
        <h6 id = "long_desc">{{ question['long_description'] }}</h6>
        <h6 id="postedBy">Posted By :{{ question['postedBy'] }}</h6>
        <h6 id = "time_stamp">{{ question['timestamp'] }}</h6>
      </div>
      </div>
    </div>
    </div>
    </div>
  <br>  
  <hr/>
  <div class = "row">
  {% for answer in answers %}
    <div id = "Ques_ans_div" class = "row">
          <br>
          <hr/>
          <div class = "col-md-8 ">
            <div id = "upvote_downvote" class = "col-md-1 col-md-offset-3">
            <input id = "upvote" type = "image" class = "vote-up" src="../../static/img/upvote.png">
            <br>
            <span class="vote-count" type = "button" name="vote-count" id="vote-count">{{ answer['votes'] }}</span>
            <br>
            <input type = "image" id= "downvote" class = "vote-down" src="../../static/img/downvote.png">
            <br>
            <button id = "bookmark_ans" type="button" >Accepted</button>
            <button id = "flag_ans" type="button" >Flag</button>
            </div> 
          <div class = "col-md-6">
            <div class = "media-object">
              <div class = "media-object-section">
                <div id = "avatar_ans" class="thumbnail pull-left">
                  <img  src="http://placehold.it/80x80&text=[img]" />
                </div>
              </div>
              <div class = "media-object-section">
                <h5 id = "answer">{{ answer['ansText'] }}</h5>
                <br>
                <h6 id="postedBy_ans">Posted By :{{ answer['postedBy'] }}</h6>
                <h6 id = "time_stamp_ans">{{ answer['timestamp'] }}</h6>
              </div>
            </div>
            </div>
            </div>
    </div>
          {% endfor %}
          </div>
          <div class = "row">
          <div class="col-md-8">
          <br>
                <form id = "ans_form" action="" method="POST" name="question">
          <div class = "form-group">
            {{ form.hidden_tag() }}
            {% for field in form if field.widget.input_type != 'hidden' %}
              <div class="control-group">
                <label class="control-label" for="{{ field.name }}" > {{ field.label }}</label>
                <div class="control">
                  {{ field(class_="form-control input-md") }}
                </div>
              </div>
            {% endfor %}
          </div>
          <div class="control-group">
            <button type="Submit" id="submit_btn" class="btn btn-default">Submit</button>
          </div>
          </form>
          </div>
          </div>
          <script type="text/javascript">
            var quesID = "{{ question['_id'] }}";
            var type = new String("");
            $('.edit-short').on('click', function(){
            updateShortDescription(quesID, "{{ question['short_description'] }}");
            });

            $('.qvote-up').on('click', function(){
            updateQuesVotes(quesID, type="up");
            });

            $('.qvote-down').on('click', function(){
            updateQuesVotes(quesID, type="down");
            });

            $('.bookmark').on('click', function(){
            setBookmark(quesID);
            });

            $('.qflag').on('click', function(){
            setQuesFlag(quesID);
            });

            $('.avote-up').on('click', function(){
            updateAnsVotes(this.parentElement.id, type="up");
            });

            $('.avote-down').on('click', function(){
            updateAnsVotes(this.parentElement.id, type="down");
            });

            $('.aflag').on('click', function(){
            setAnsFlag(this.parentElement.id);
            });

            $('.accepted').on('click', function(){
            setAcceptedAns(quesID, this.parentElement.id);
            });

          </script> 
  {% endblock %}